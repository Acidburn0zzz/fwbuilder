.TH  fwbedit  1 "" FWB "Firewall Builder"
.SH NAME
fwbedit \- General purpose object tree editing tool
.SH SYNOPSIS

.B fwbedit
.RB command
.RB [options]


.SH "DESCRIPTION"

.B fwbedit
is a general purpose object tree editing tool for Firewall Builder
(see fwbuilder(1)). This tool can be used in the shell scripts written
for batch-processing of the Firewall Builder data files. Fwbedit can
perform the following operations on the objects and the tree: create
new object, delete existing object, modify attributes of an object,
add a reference to the given object to a group, remove reference to an
object from a group, upgrade data file and check object tree in the
file and repair it if necessary. Both object and a group can be
defined by their ID or by their name and a full path in the tree
(see section
.B EXAMPLES
below).


.SH COMMANDS AND OPTIONS:

.B new

Creates new object.

.PP
 -f file.fwb: data file
.PP
 -t objtype: create a new object of this type
.PP
 -n name: the name of the new object
.PP
 -c txt:  specify comment for the new object
.PP
 -a attribute1[,attribute2...]  :  specify attributes that
              define parameters of the new object (see below)



.B delete

Deletes object specified by its full path in the tree or object ID.

.PP
 -f file.fwb: data file
.PP
 -o object: object to be deleted, full path or ID



.B modify

Modifies object specified by its full path in the tree or object ID. 
Object can not be renamed using this operation.

.PP
 -f file.fwb: data file
.PP
 -o object: object to be deleted, full path or ID
.PP
 -c txt:  specify comment for the new object
.PP
 -a attribute1[,attribute2...]  :  specify attributes that
              define parameters of the new object (see below)



.B list

Prints name and ID of an object.

.PP
 -f file.fwb: data file
.PP
 -o object: object to print, full path or ID



.B add

Adds object specified by path or ID to a group, also specified by its
path or ID.

.PP
 -f file.fwb: data file
.PP
 -p group: group the object should be added to, 
              full path or ID
.PP
 -o object: object to be deleted, full path or ID



.B remove

Removes object from a group.

.PP
 -f file.fwb: data file
.PP
 -p group: group the object should be removed from,
       full path or ID
.PP
 -o object: object to be deleted, full path or ID



.B upgrade

Upgrades data file to the latest data format version.

          -f file.fwb: data file


.B checktree

Checks consistency and correctness of the object tree in the given
data file and repairs it if necessary.
 
          -f file.fwb: data file



.SH ATTRIBUTES FOR THE NEW OBJECTS, BY TYPE
.PP

.PP
-t Firewall -o platform, host OS
.PP
-t IPv4 -o IP address [,netmask]
.PP
-t IPv6 -o IPv6 address [,masklen]
.PP
-t DNSName -o DNS record,run time
.PP
-t AddressRange -o start address, end address
.PP
-t ObjectGroup
.PP
-t Network -o address,netmask
.PP
-t NetworkIPv6 -o ipv6_address,netmask_length
.PP
-t Interval -o start time,start date,start day,end time, end date, end day
.PP
-t Interface -o security level,address type (dynamic or unnumbered),management
.PP
-t Host
.PP
-t TCPService -o source port range start,end,destination port range start,end,UAPRSF,UAPRSF
.PP
-t UDPService -o source port range start,end,Destination port range start,end
.PP
-t ICMPService -o ICMP type,ICMP code
.PP
-t IPService -o protocol number,lsrr/ssrr/rr/ts/fragm/short_fragm


.SH EXAMPLES

.PP
Add IPv6 address to one of the interfaces of firewall object "firewall":
.PP
fwbedit new  -f x.fwb -p /User/Firewalls/firewall/eth3 -t IPv6 -n eth3-v6-addr -o 2001:470:1f05:590::2,64

.PP
Add reference to the Host object 'A' to the group 'B':
.PP
fwbedit add -f x.fwb -g /User/Objects/Groups/B -o /User/Objects/Hosts/A


.PP
Add reference to the object with ID id3D71A1BA to the group with ID
id3D151943. If objects with given IDs do not exist, fwbedit prints an
error message and does not make any changes in the data file.
.PP
fwbedit add -f x.fwb -o id3D71A1BA -g id3D151943


.PP
Add reference to the object with ID id3D71A1BA to the group 'testgroup':
.PP
fwbedit add -f x.fwb -o id3D71A1BA -g /User/Objects/Groups/testgroup
.PP


.PP
fwbedit can be used in combination with fwblookup to execute
operations on many objects.
.PP
First, the following script uses fwblookup to print full path of all
Host objects (option -l in combination with option -P prints full path
for all children objects of /Objects/Hosts), then uses grep to filter
only those hosts that have 'domain.com' in their name, then cycles
through the obtained list and uses fwbedit to add them to the
group 'domainGRP'.
.LP
  fwblookup -f x.fwb -lP /User/Objects/Hosts | \\
  grep domain.com | \\
  while read h; do \\
    fwbedit add -f x.fwb -o $h -g /User/Objects/Groups/domainGRP; \\
  done


.SH URL
Firewall Builder home page is located at the following URL:
.B http://www.fwbuilder.org/

.SH BUGS
Please report bugs using bug tracking system on SourceForge: 

.BR http://sourceforge.net/tracker/?group_id=5314&atid=105314


.SH SEE ALSO
.BR fwbuilder(1),
.BR fwblookup(1),

.P
